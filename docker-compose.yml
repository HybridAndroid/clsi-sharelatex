# This file was auto-generated, do not edit it directly.
# Instead run bin/update_build_scripts from
# https://github.com/sharelatex/sharelatex-dev-environment
# Version: 1.1.0

version: "2"

services:
  test_unit:
    image: node:6.13.0
    volumes:
      - .:/app
    working_dir: /app
    entrypoint: npm run test:unit

  test_acceptance:
    build: .
    volumes:
      - .:/app
    working_dir: /app
    extends:
      file: docker-compose-config.yml
      service: dev
    environment:
      REDIS_HOST: redis
      MONGO_HOST: mongo
    depends_on:
      - redis
      - mongo
    entrypoint: npm run test:acceptance

  synctex:
    image: quay.io/sharelatex/texlive-full:2017.1
    volumes:
      - ~/Projects/sharelatex-dev-environment/clsi/compiles/cd749215b3512:/compile
      - ./bin/synctex:/opt/synctex

    entrypoint: 
      /opt/synctex pdf /compile/output.pdf 1 100 200
      # /opt/synctex code -h
      # /opt/synctex code /compile/main.tex ./main.tex 3 5
      # ls -al

  app:
    build: .
    volumes:
      - .:/app
    working_dir: /app
    extends:
      file: docker-compose-config.yml
      service: dev
    environment:
      REDIS_HOST: redis
      MONGO_HOST: mongo
    depends_on:
      - redis
      - mongo


  redis:
    image: redis

  mongo:
    image: mongo:3.4
